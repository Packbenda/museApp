<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MusApp3000</title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel = stylesheet href = "{% static 'css/style.css' %}">


</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
          <a class="navbar-brand" href="{% url 'index' %}"><h2>MusApp Voting Application</h2></a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
      </nav>
</body>
<div class = container>
    {% block content %}
    <h1>Hello World</h1>
{% endblock %} 
</div>

<script>


function initApp() {
    $(".intro-form").hide();
    $(".results").hide();
    $("#playlist-terms").keyup(
        function(event) {
            if (event.keyCode == 13) {
                go();
            }
        }
    );
    $("#go").on('click', function() {
        go();
    });

    $(".stop-button").on('click', function() {
        abortFetching = true;
    });

    $("#fetch-tracks").on('click', function() {
        fetchAllTracksFromPlaylist();
    });

    $("#login-button").on('click', function() {
        loginWithSpotify();
    });
    $("#save-button").on('click', function() {
        savePlaylist();
    });

    $("#norm-for-pop").on('click', function() {
        popNormalize = $("#norm-for-pop").is(':checked');
        refreshTrackList(allTracks);
    });
}


function loginWithSpotify() {
    var client_id = '4042a231fe624583a694f1d6cf9e25b5';
    var redirect_uri = 'http://playlistminer.playlistmachinery.com/';
    var scopes = 'playlist-modify-public';

    if (document.location.hostname == 'localhost') {
        redirect_uri = 'http://localhost:8000/index.html';
    }

    var url = 'https://accounts.spotify.com/authorize?client_id=' + client_id +
        '&response_type=token' +
        '&scope=' + encodeURIComponent(scopes) +
        '&redirect_uri=' + encodeURIComponent(redirect_uri);
    document.location = url;
}


</script>


</html>

